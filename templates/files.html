{% extends "base.html" %}
{% block content %}
<div class="container">
  <h2>{{ folder.name }} â€” Files</h2>

  <!-- Upload form -->
  <form action="{{ url_for('upload_file', folder_id=folder.id) }}" method="POST" enctype="multipart/form-data" class="upload-form">
    <input type="file" name="file" required>
    <button type="submit" class="btn upload-btn">Upload</button>
  </form>

  <h3>Uploaded Files</h3>
  {% if files %}
  <div class="file-list">
    {% for file in files %}
    <div class="file-card">
      <div class="file-info">
        <span class="file-icon">ðŸ“„</span>
        <span class="file-name">{{ file.filename }}</span>
      </div>
      <div class="file-actions">
        <a href="{{ url_for('download_file', file_id=file.id) }}" class="btn download-btn">â¬‡ Download</a>
        {% if current_user.role == 'admin' %}
        <form action="{{ url_for('delete_file', file_id=file.id) }}" method="POST" style="display:inline;">
          <button type="submit" class="btn delete-btn">ðŸ—‘ Delete</button>
        </form>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="no-files">No files uploaded yet.</p>
  {% endif %}

  <a href="{{ url_for('dashboard') }}" class="btn back-btn">â¬… Back to Folders</a>
</div>
{% endblock %}

